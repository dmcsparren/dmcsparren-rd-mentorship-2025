version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Current directory:" && pwd
        - echo "Listing contents:"
        - ls -la
        - echo "Checking for kolsch-main:"
        - test -d kolsch-main && echo "kolsch-main directory exists" || echo "kolsch-main directory not found"
        - test -f kolsch-main/package.json && echo "package.json found in kolsch-main" || echo "package.json not found in kolsch-main"
    build:
      commands:
        - echo "Starting build process..."
        - cd kolsch-main
        - echo "Installing dependencies in kolsch-main..."
        - npm ci
        - echo "Building application..."
        - npm run build
        - echo "Checking what was built:"
        - ls -la
        - echo "Looking for build output folders:"
        - find . -name "build" -o -name "dist" -type d
        - echo "Contents of any build/dist folders:"
        - test -d build && ls -la build/ || echo "No build folder"
        - test -d dist && ls -la dist/ || echo "No dist folder"
  artifacts:
    baseDirectory: kolsch-main/dist
    files:
      - '**/*'
  cache:
    paths:
      - kolsch-main/node_modules/**/*