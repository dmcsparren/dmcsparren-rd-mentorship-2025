version: 1
frontend:
  phases:
    preBuild:
      commands:
        - echo "Current directory:" && pwd
        - echo "Listing contents:"
        - ls -la
        - echo "Checking for kolsch-main:"
        - test -d kolsch-main && echo "kolsch-main directory exists" || echo "kolsch-main directory not found"
        - test -f kolsch-main/package.json && echo "package.json found in kolsch-main" || echo "package.json not found in kolsch-main"
    build:
      commands:
        - echo "Starting build process..."
        - cd kolsch-main
        - echo "Installing dependencies in kolsch-main..."
        - npm ci
        - echo "Building application..."
        - npm run build
        - echo "Checking build output:"
        - ls -la dist/
        - echo "Checking public folder:"
        - ls -la dist/public/
  artifacts:
    baseDirectory: kolsch-main/dist/public
    files:
      - '**/*'
  cache:
    paths:
      - kolsch-main/node_modules/**/*